webpackJsonp([1],{"30DL":function(t,e){},"64JM":function(t,e){},"7gc7":function(t,e){},"A+B0":function(t,e){},KsHA:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},r,!1,function(t){s("h5Cy")},null,null).exports,o=s("/ocq"),i=s("mtWM"),l=s.n(i),u={name:"NavBar",computed:{username:function(){return this.$store.state.username},avatarURL:function(){return this.$store.state.avatarURL}},methods:{logout:function(){var t=this;l.a.post("/logout").then(function(e){t.$store.state.username="",t.$store.state.alertMsg=e.data.message,console.log(e.data.message),setTimeout(function(){t.$store.state.alertMsg=""},3e3),t.$router.push("/")}).catch(function(t){console.log(t)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"s-navbar"},[s("div",{staticClass:"s-nav-group"},[s("router-link",{staticClass:"s-nav-item",attrs:{to:"/",exact:""}},[t._v("Home "),s("i",{staticClass:"fas fa-home"})])],1),t._v(" "),s("div",{staticClass:"s-nav-group"},[t.username?t._e():s("router-link",{staticClass:"s-nav-item",attrs:{to:"/register",exact:""}},[t._v("Join "),s("i",{staticClass:"fas fa-user-plus"})]),t._v(" "),t.username?t._e():s("router-link",{staticClass:"s-nav-item",attrs:{to:"/login",exact:""}},[t._v("Sign In "),s("i",{staticClass:"fas fa-sign-in-alt"})]),t._v(" "),t.username?s("router-link",{staticClass:"s-nav-item",attrs:{to:"/profile"}},[t._v("Profile "),s("i",{staticClass:"far fa-user-circle"})]):t._e(),t._v(" "),t.username?s("a",{staticClass:"s-nav-item",on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Sign Out "),s("i",{staticClass:"fas fa-sign-out-alt"})]):t._e(),t._v(" "),t.username?s("span",{staticClass:"text-center",attrs:{id:"nav-username"}},[s("i",[t._v(t._s(t.username))])]):t._e(),t._v(" "),t.username?s("img",{attrs:{id:"img-avatar",src:this.avatarURL,alt:"avatar image"}}):t._e()],1)])])},staticRenderFns:[]};var p=s("VU/8")(u,c,!1,function(t){s("u5bt")},"data-v-452fc2b1",null).exports,m={name:"PostCard",props:{index:Number},computed:{postsAndAvatar:function(){return this.$store.state.postsAndAvatar[this.index]},dateCreated:function(){var t=new Date(this.postsAndAvatar.post.createdAt);return t.getMonth()+"/"+t.getDate()+"/"+t.getFullYear()},dateUpdated:function(){var t=new Date(this.postsAndAvatar.post.updatedAt);return t.getMonth()+"/"+t.getDate()+"/"+t.getFullYear()},placeHolderImg:function(){return"http://www.placepuppy.net/"+(this.index+1)+"p/200/125"},authorAvatar:function(){return this.postsAndAvatar.authorAvatar}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("img",{staticClass:"card-img-top",attrs:{src:t.placeHolderImg,alt:"Card image cap"}}),t._v(" "),s("div",{staticClass:"card-body"},[s("h3",{staticClass:"card-title overflow-ellipsis text-center"},[t._v(t._s(t.postsAndAvatar.post.title))]),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(t.postsAndAvatar.post.post.substr(0,200))+"...")])]),t._v(" "),s("div",{staticClass:"card-footer row"},[s("div",{staticClass:"col-4 text-center"},[s("img",{staticClass:"img-avatar",attrs:{src:t.authorAvatar,alt:"author's avatar"}}),t._v(" "),s("small",{staticClass:"text-muted d-block overflow-ellipsis"},[s("em",[t._v(t._s(t.postsAndAvatar.post.author))])])]),t._v(" "),s("div",{staticClass:"col-8"},[s("div",{staticClass:"time-stamp text-center"},[s("small",{staticClass:"text-muted d-block"},[t._v("Created: "+t._s(t.dateCreated))]),t._v(" "),s("small",{staticClass:"text-muted d-block"},[t._v("Updated: "+t._s(t.dateCreated))])]),t._v(" "),t._m(0)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feedback-grid"},[s("span",[s("img",{staticStyle:{width:"1rem",height:"1rem"},attrs:{src:"https://emoji.fileformat.info/gemoji/thumbsup.png",alt:"Gemoji image for :thumbsup:"}}),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("17")])]),t._v(" "),s("span",[s("img",{staticStyle:{width:"1rem",height:"1rem"},attrs:{src:"https://emoji.fileformat.info/gemoji/thumbsdown.png",alt:"Gemoji image for :thumbsdown"}}),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("2")])]),t._v(" "),s("span",[s("img",{staticStyle:{width:"1rem",height:"1rem"},attrs:{src:"https://emoji.fileformat.info/gemoji/speech_balloon.png",alt:"Gemoji image for :speech_balloon"}}),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("27")])])])}]};var d={name:"MainPage",components:{"nav-bar":p,"post-card":s("VU/8")(m,v,!1,function(t){s("txB7")},"data-v-2cae84ee",null).exports},computed:{username:function(){return this.$store.state.username},postsAndAvatar:function(){return this.$store.state.postsAndAvatar},alertMsg:function(){return this.$store.state.alertMsg}},created:function(){var t=this;l.a.get("/posts").then(function(e){t.$store.state.postsAndAvatar=e.data}).catch(function(t){console.log(t)})}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),t.alertMsg?s("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v("\n    "+t._s(t.alertMsg)+"\n  ")]):t._e(),t._v(" "),s("h2",{staticClass:"text-center"},[t._v("Welcome to Home Page, "+t._s(t.username))]),t._v(" "),s("div",{staticClass:"posts-container"},t._l(t.postsAndAvatar,function(t,e){return s("div",[s("router-link",{attrs:{to:"/post/"+t.post._id}},[s("post-card",{attrs:{index:e}})],1)],1)}))],1)},staticRenderFns:[]};var _=s("VU/8")(d,f,!1,function(t){s("A+B0")},"data-v-4b34d174",null).exports,g={name:"Register",components:{"nav-bar":p},data:function(){return{msg:"Register form",password:"",username:"",confirmPassword:"",email:""}},methods:{register:function(){var t=this;l.a.post("/register",{username:this.username,password:this.password,confirmPassword:this.confirmPassword,email:this.email}).then(function(e){e.data.username?(t.$store.state.username=e.data.username,t.$router.push("/profile")):(t.$store.username="",t.msg=e.data.message)}).catch(function(t){console.log(t)})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("h1",{staticClass:"text-center"},[t._v(t._s(t.msg))]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"regUsername"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"regUsername",placeholder:"Username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"regPassword"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"regPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"regConfirmPassword"}},[t._v("Confirm Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"regConfirmPassword",placeholder:"Password",required:""},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"regUserEmail"}},[t._v("Email address")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"regUserEmail",placeholder:"user@example.com",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("small",{staticClass:"form-text text-muted"},[t._v("We'll never share your email with anyone else.")])]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Register")])])],1)},staticRenderFns:[]};var P=s("VU/8")(g,h,!1,function(t){s("rOKF")},"data-v-70837500",null).exports,w={name:"Login",components:{"nav-bar":p},data:function(){return{msg:"Welcome Guest, please login!",password:"",username:""}},methods:{login:function(){var t=this;l.a.post("/login",{username:this.username,password:this.password}).then(function(e){t.$store.state.alertMsg=e.data.message,setTimeout(function(){t.$store.state.alertMsg=""},2e3),t.$store.state.username=e.data.username,t.$router.push("/profile/myposts")}).catch(function(e){t.msg="Error: "+e})}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("h1",[t._v(t._s(t.msg))]),t._v(" "),s("form",{attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"loginUsername"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"loginUsername",placeholder:"Username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"loginPassword"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"loginPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Login")])])],1)},staticRenderFns:[]};var b=s("VU/8")(w,C,!1,function(t){s("KsHA")},"data-v-0d6ba89e",null).exports,x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav",{staticClass:"s-navbar"},[e("router-link",{staticClass:"s-nav-item",attrs:{to:"/profile/myposts"}},[this._v("My posts")]),this._v(" "),e("router-link",{staticClass:"s-nav-item",attrs:{to:"/profile/newpost"}},[this._v("Create a new post")]),this._v(" "),e("router-link",{staticClass:"s-nav-item",attrs:{to:"/profile/update"}},[this._v("Update profile")])],1)])},staticRenderFns:[]};var $={name:"Profile",data:function(){return{avatarImg:null,errMsg:""}},components:{"nav-bar":p,"pro-nav-bar":s("VU/8")({name:"ProfilePage-NavBar"},x,!1,function(t){s("w1Wp")},"data-v-de013316",null).exports},computed:{username:function(){return this.$store.state.username},alertMsg:function(){return this.$store.state.alertMsg},avatarURL:function(){return this.$store.state.avatarURL}},created:function(){var t=this;this.$store.state.username="",l.a.post("/profile").then(function(e){e.data.username?(t.$store.state.username=e.data.username,t.$store.state.avatarURL=e.data.avatarURL):(t.$store.state.alertMsg=e.data.message,setTimeout(function(){t.$store.state.alertMsg="",t.$router.push("/login")},2e3))}).catch(function(t){console.log(t)})}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.alertMsg?s("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v("\n    "+t._s(t.alertMsg)+"\n  ")]):t._e(),t._v(" "),s("nav-bar"),t._v(" "),s("h2",{staticClass:"text-center"},[t._v("Welcome to Profile Page, "+t._s(t.username))]),t._v(" "),s("pro-nav-bar"),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var A=s("VU/8")($,y,!1,function(t){s("7gc7")},"data-v-25f8371e",null).exports,U={name:"NewPost",data:function(){return{msg:"",post_title:"",post_text:""}},computed:{username:function(){return this.$store.state.username}},methods:{createNewPost:function(){var t=this;l.a.post("/profile/newpost",{post_title:this.post_title,post_text:this.post_text}).then(function(e){t.$router.push("/profile/myposts")}).catch(function(e){t.msg="Error: "+e})}}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("New Post")]),t._v(" "),s("form",{attrs:{action:"/profile/newpost",method:"post"}},[s("h3",[t._v("Title:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.post_title,expression:"post_title"}],attrs:{type:"text",name:"title",placeholder:"Post Title"},domProps:{value:t.post_title},on:{input:function(e){e.target.composing||(t.post_title=e.target.value)}}}),t._v(" "),s("h3",[t._v("Post:")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post_text,expression:"post_text"}],attrs:{name:"post",rows:"10",cols:"100",placeholder:"Post Text"},domProps:{value:t.post_text},on:{input:function(e){e.target.composing||(t.post_text=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.createNewPost}},[t._v("Create a new post")])])])},staticRenderFns:[]};var E=s("VU/8")(U,M,!1,function(t){s("lrUE")},"data-v-01e35b22",null).exports,R={name:"EditPost",computed:{post:{get:function(){var t=this;return this.$store.state.userPosts.find(function(e){return e._id==t.$route.params.id})},set:function(t){this.$store.commit("editPost",t)}}},methods:{editPost:function(){var t=this;l.a.put("/profile/post/"+this.post._id,{post_title:this.post.title,post_text:this.post.post}).then(function(e){t.$router.push("/profile/post/"+t.post._id)}).catch(function(e){t.msg="Error: "+e})}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Edit Post")]),t._v("\n  "+t._s(t.post)+"\n  "),s("form",{on:{submit:function(e){return e.preventDefault(),t.editPost(e)}}},[s("h3",[t._v("Title:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],attrs:{type:"text",name:"title"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),t._v(" "),s("h3",[t._v("Post:")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.post,expression:"post.post"}],attrs:{name:"post",rows:"10",cols:"100"},domProps:{value:t.post.post},on:{input:function(e){e.target.composing||t.$set(t.post,"post",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Edit post")])])])},staticRenderFns:[]};var N=s("VU/8")(R,F,!1,function(t){s("cRBX")},"data-v-6c2eed3e",null).exports,k={name:"ProfileUpdate",data:function(){return{avatarImg:null,errMsg:""}},computed:{avatarURL:function(){return this.$store.state.avatarURL}},methods:{onSelectFile:function(){var t=this.$refs.avatarImgFile.files[0],e=t.size>3e5;this.avatarImg=t,["image/jpeg","image/png","image/gif"].includes(t.type)&&!e?this.errMsg="":this.errMsg=e?"FE: Too large file. Max size is 292.96875Kb":"FE: Only .jp(e)g, .png, .gif files are allowed."},updateAvatar:function(){var t=this,e=new FormData;e.append("avatarImg",this.avatarImg),l.a.post("/upload",e).then(function(e){console.log(e),t.$store.state.avatarURL=e.data.avatarURL}).catch(function(e){console.log(e),t.errMsg=e.response.data.error||""})}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.updateAvatar(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"updateAvatarImg"}},[t._v("Upload Avatar")]),t._v(" "),s("input",{ref:"avatarImgFile",staticClass:"form-control-file",attrs:{type:"file",id:"updateAvatarImg",accept:"image/jpeg, image/png, image/gif"},on:{change:t.onSelectFile}}),t._v(" "),t.errMsg?s("h4",{staticClass:"alert alert-danger"},[t._v(t._s(t.errMsg))]):t._e()]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:0!=t.errMsg.length}},[t._v("Update avatar")])]),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var V=s("VU/8")(k,L,!1,function(t){s("30DL")},"data-v-d0267436",null).exports,j={name:"ProfilePage-MyPosts",computed:{username:function(){return this.$store.state.username},userPosts:function(){return this.$store.state.userPosts}},created:function(){var t=this;l.a.get("/profile/myposts").then(function(e){t.$store.state.userPosts=e.data}).catch(function(t){console.log(t)})}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"text-center"},[t._v("Welcome to My Posts Page, "+t._s(t.username))]),t._v(" "),t._l(t.userPosts,function(e){return s("div",[s("router-link",{attrs:{to:"/profile/post/"+e._id}},[s("h4",[t._v(t._s(e.title))])])],1)})],2)},staticRenderFns:[]};var S=s("VU/8")(j,D,!1,function(t){s("64JM")},"data-v-1c70ebc0",null).exports,I={name:"ProfilePage-SinglePost",computed:{post:function(){var t=this;return this.$store.state.userPosts.find(function(e){return e._id==t.$route.params.id})}},methods:{deletePost:function(){var t=this;console.log(this.post._id),l.a.delete("profile/post/"+this.post._id).then(function(){t.$router.push("/profile/myposts")}).catch(function(t){console.log(t)})},editPost:function(){this.$router.push("/profile/editpost/"+this.post._id)}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"text-center"},[t._v(t._s(t.post.title))]),t._v(" "),s("h2",{staticClass:"text-center"},[t._v(t._s(t.post._id))]),t._v(" "),s("article",[t._v("\n    "+t._s(t.post.post)+" \n  ")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.editPost}},[t._v("Edit post")]),t._v(" "),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deletePost}},[t._v("Delete post")])])},staticRenderFns:[]};var O=s("VU/8")(I,T,!1,function(t){s("NSvO")},"data-v-1e93c072",null).exports,W={name:"Post",components:{"nav-bar":p},computed:{post:function(){var t=this;return this.$store.state.postsAndAvatar.find(function(e){return e.post._id==t.$route.params.id}).post}}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar"),t._v(" "),s("h2",{staticClass:"text-center"},[t._v(t._s(t.post.title))]),t._v(" "),s("article",[t._v("\n    "+t._s(t.post.post)+" \n  ")])],1)},staticRenderFns:[]};var H=s("VU/8")(W,B,!1,function(t){s("nEPE")},"data-v-79de353c",null).exports;a.a.use(o.a);var q=new o.a({routes:[{path:"/",name:"MainPage",component:_},{path:"/register",name:"RegisterPage",component:P},{path:"/login",name:"LoginPage",component:b},{path:"/post/:id",name:"Post",component:H},{path:"/profile",name:"ProfilePage",component:A,children:[{path:"newpost",name:"NewPost",component:E},{path:"editpost/:id",name:"EditPost",component:N},{path:"update",name:"ProfileUpdate",component:V},{path:"myposts",name:"ProfileMyPosts",component:S},{path:"post/:id",name:"ProfileSinglePost",component:O}]}]}),K=s("NYxO");a.a.use(K.a);var G=new K.a.Store({state:{username:"",alertMsg:"",postsAndAvatar:[],avatarURL:"",userPosts:[]},mutations:{editPost:function(t,e){var s=t.userPosts.find(function(t){return t._id==e._id});s.title=e.title,s.post=e.post}}});a.a.config.productionTip=!1,new a.a({el:"#app",store:G,router:q,components:{App:n},template:"<App/>"})},NSvO:function(t,e){},cRBX:function(t,e){},h5Cy:function(t,e){},lrUE:function(t,e){},nEPE:function(t,e){},rOKF:function(t,e){},txB7:function(t,e){},u5bt:function(t,e){},w1Wp:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f845df5bbb693a0b05ef.js.map